---
- name: Get Configuration using gNMI
  gather_facts: false
  hosts: all

  vars:
    ansible_connection: nokia.openconfig.gnmi

  tasks:
  - name: Get Nodal Configuration (using gNMI GET)
    nokia.openconfig.gnmi_get:
      type: CONFIG
      path:
        - /oc:interfaces/interface[name=*]
    register: testout

  - name: dump test output
    debug:
      msg:
        {{ testout.output }}
