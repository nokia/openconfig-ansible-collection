---
- name: Nokia SR OS Stream Large Configuration
  gather_facts: false
  hosts: nokia_srsim
  
  vars:
    ansible_connection: nokia.openconfig.gnmi

  tasks:
  - name: Get Nodal Configuration (using gNMI Subscribe/ONCE)
    nokia.openconfig.gnmi_subscribe:
      mode: ONCE
      subscription:
        - path: /configure
    register: testout

  - name: dump test output
    debug:
      msg: {{ testout.output | from_json }}
