---
- name: gNMI Subscribe ONCE for Nokia SR OS
  gather_facts: false
  hosts: nokia_srsim
  
  vars:
    ansible_connection: nokia.openconfig.gnmi

  tasks:
  - name: Get Nodal Configuration (using gNMI Subscribe/ONCE)
    nokia.openconfig.gnmi_subscribe:
      mode: ONCE
      subscription:
        - path: /configure
    register: testout

  - name: dump test output
    debug:
      msg: '{{ testout.output }}'
